<ion-header class="wallet-details-header">
  <ion-navbar [navbar-bg]="wallet.color">
    <ion-buttons left>
      <button class="modal-close-button" (click)="close()" ion-button>
        <ion-icon ios="md-close" md="md-close"></ion-icon>
      </button>
    </ion-buttons>
    <ion-title>{{wallet && wallet.name || ('Receive'|translate)}}</ion-title>
    <ion-buttons right>
      <button class="horizontal-lg" *ngIf="wallet && wallet.isComplete() && !wallet.needsBackup" (click)="showMoreOptions()" ion-button
        icon-only>
        <ion-icon name="more"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
  <ion-toolbar [navbar-bg]="wallet.color">
    <div class="wallet-details-header__balance">{{wallet.status.totalBalanceStr}}</div>
  </ion-toolbar>
</ion-header>

<ion-content no-bounce>
  <div class="wrapper">
    <div>
      <div *ngIf="!wallet" class="no-wallets">
        <button ion-button clear>
          <span translate>No wallet</span>
        </button>
      </div>
    </div>
    <div class="card qr-card" [ngClass]="{'qr-code-bounce': playAnimation}" *ngIf="wallets[0]">

      <div *ngIf="wallet && wallet.isComplete() && wallet.needsBackup" class="message-container">
        <div class="title">
          <span translate>Wallet not backed up</span>
        </div>
        <div class="subtitle">
          <span translate>Funds received to a wallet cannot be retrieved if the wallet is not backed up.</span>
          <a (click)="openWikiBackupNeeded()" translate>Learn more</a>
        </div>
        <button ion-button class="button-standard" (click)="goToBackup()">
          {{'Backup wallet' | translate}}
        </button>
      </div>

      <div *ngIf="wallet && !wallet.isComplete()" class="message-container">
        <div class="title">
          <span translate>Incomplete wallet</span>
        </div>
        <div class="subtitle">
          <span translate>All signing devices must be added to this multisig wallet before bitcoin addresses can be created.</span>
        </div>
        <button ion-button class="button-standard" (click)="goCopayers()">
          {{'Open wallet' | translate}}
        </button>
      </div>

      <div *ngIf="wallet && wallet.isComplete() && !wallet.needsBackup" class="qr-container">
        <ngx-qrcode *ngIf="address" class="qr-code" copy-to-clipboard="{{ address }}" qrc-value="{{qrAddress}}" qrc-class="aclass"
          qrc-errorCorrectionLevel="M"></ngx-qrcode>
      </div>
    </div>

    <div *ngIf="wallets[0]" class="receive-content">
      <div *ngIf="wallet && wallet.isComplete() && !wallet.needsBackup" class="address-container">
        <div class="text-address ellipsis">
          <img *ngIf="wallet.coin == 'btc'" src="assets/img/icon-bitcoin-small.svg" alt="BTC" width="12" />
          <span class="address-divider"></span>
          <div class="address-text ellipsis">
            <span [ngClass]="{'fade-in-out': playAnimation}" copy-to-clipboard="{{ address }}">{{ address }}</span>
          </div>

          <button class="new-address-btn" detail-none text-center (click)="setAddress(true)">
            <span class="new-address" ion-text color="primary" translate>
              <img *ngIf="loading" src="assets/img/right.svg" width="16" />
              <div *ngIf="!loading" [ngClass]="{'spin-fast': !loading}" class="spinner"></div>
            </span>
          </button>
        </div>
      </div>
    </div>
  </div>
</ion-content>